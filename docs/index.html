<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MaShop 사냥터 시세 대시보드</title>
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, "Malgun Gothic", sans-serif; margin: 16px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    select, button { padding:8px 10px; font-size:14px; }
    .card { border:1px solid #ddd; border-radius:10px; padding:12px; margin-top:12px; }
    .small { color:#666; font-size:12px; }
    .rec li { margin: 6px 0; }
    .pill { display:inline-block; padding:2px 8px; border:1px solid #ccc; border-radius:999px; font-size:12px; margin-left:6px; color:#444; }
  </style>
</head>
<body>
  <h2>MaShop 사냥터 시세 대시보드</h2>
  <div class="small">최근 14일 기준 · 업데이트 기준시각: 2025-12-31 23:00 (KST)</div>

  <div class="card">
    <div class="row">
      <div><b>사냥터 선택</b></div>
      <select id="kwSelect"></select>
      <div class="small">추천 판매시간은 거래(평균) 10건 이상만 반영</div>
    </div>
  </div>

  <div class="card">
    <b>추천 판매시간 TOP 3</b>
    <ul class="rec" id="recList"></ul>
  </div>

  <div class="card">
    <b>날짜별 시간대 가격 변화</b>
    <div class="small">x축: 01:00~23:00 + 마지막 00:00(다음날 00:00)</div>
    <div id="chart" style="width:100%;height:520px;"></div>
  </div>

<script>
const MAPS = ["미나르숲:남겨진 용의 둥지", "사냥터B", "사냥터C"];
const DATA = {"미나르숲:남겨진 용의 둥지": {"dates": ["2025-12-24", "2025-12-25", "2025-12-26", "2025-12-27", "2025-12-28", "2025-12-29", "2025-12-30", "2025-12-31"], "series": [{"label": "2025-12-24(수)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [null, null, null, null, null, null, 1249999.0, 716666.0, 2321738.0, 4572727.0, 5414285.0, 8315789.0, 8291666.0, 9343749.0, 9733333.0, 10419999.0, 8333333.0, 7499999.0, 5916666.0, 5352941.0, 5973912.0, 6375000.0, 6558823.0, 7539999.0], "hover": [["01:00", "-", "", "2025-12-24"], ["02:00", "-", "", "2025-12-24"], ["03:00", "-", "", "2025-12-24"], ["04:00", "-", "", "2025-12-24"], ["05:00", "-", "", "2025-12-24"], ["06:00", "-", "", "2025-12-24"], ["07:00", "124만", "6건", "2025-12-24"], ["08:00", "71만", "7건", "2025-12-24"], ["09:00", "232만", "26건", "2025-12-24"], ["10:00", "457만", "13건", "2025-12-24"], ["11:00", "541만", "14건", "2025-12-24"], ["12:00", "831만", "24건", "2025-12-24"], ["13:00", "829만", "18건", "2025-12-24"], ["14:00", "934만", "18건", "2025-12-24"], ["15:00", "973만", "20건", "2025-12-24"], ["16:00", "1,041만", "29건", "2025-12-24"], ["17:00", "833만", "23건", "2025-12-24"], ["18:00", "749만", "22건", "2025-12-24"], ["19:00", "591만", "22건", "2025-12-24"], ["20:00", "535만", "19건", "2025-12-24"], ["21:00", "597만", "25건", "2025-12-24"], ["22:00", "637만", "20건", "2025-12-24"], ["23:00", "655만", "18건", "2025-12-24"], ["00:00", "753만", "23건", "2025-12-25"]]}, {"label": "2025-12-25(목)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [6377036.0, 5966666.0, 5999999.0, 2904761.0, 2113769.0, 4306249.0, 6425000.0, 9399999.0, 12363636.0, 13769230.0, 15124999.0, 13799999.0, 11611110.0, 13468749.0, 15583333.0, 16531060.0, 12977833.0, 7909090.0, 7392360.0, 6921052.0, 7252381.0, 7962500.0, 7388888.0, 5117809.0], "hover": [["01:00", "637만", "31건", "2025-12-25"], ["02:00", "596만", "22건", "2025-12-25"], ["03:00", "599만", "20건", "2025-12-25"], ["04:00", "290만", "22건", "2025-12-25"], ["05:00", "211만", "13건", "2025-12-25"], ["06:00", "430만", "16건", "2025-12-25"], ["07:00", "642만", "16건", "2025-12-25"], ["08:00", "939만", "25건", "2025-12-25"], ["09:00", "1,236만", "13건", "2025-12-25"], ["10:00", "1,376만", "15건", "2025-12-25"], ["11:00", "1,512만", "19건", "2025-12-25"], ["12:00", "1,379만", "12건", "2025-12-25"], ["13:00", "1,161만", "20건", "2025-12-25"], ["14:00", "1,346만", "19건", "2025-12-25"], ["15:00", "1,558만", "21건", "2025-12-25"], ["16:00", "1,653만", "23건", "2025-12-25"], ["17:00", "1,297만", "22건", "2025-12-25"], ["18:00", "790만", "36건", "2025-12-25"], ["19:00", "739만", "19건", "2025-12-25"], ["20:00", "692만", "23건", "2025-12-25"], ["21:00", "725만", "24건", "2025-12-25"], ["22:00", "796만", "17건", "2025-12-25"], ["23:00", "738만", "23건", "2025-12-25"], ["00:00", "511만", "35건", "2025-12-26"]]}, {"label": "2025-12-26(금)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [1524999.0, 1505005.0, 878571.0, 515384.0, 1169247.0, 3666666.0, 3857142.0, 6310457.0, 11382352.0, 9824999.0, 15200000.0, 14351465.0, 14916666.0, 16050000.0, 14566666.0, 17573232.0, 17576923.0, 15115384.0, 13419354.0, 14159090.0, 13095833.0, 14052631.0, 12074999.0, 8469123.0], "hover": [["01:00", "152만", "37건", "2025-12-26"], ["02:00", "150만", "24건", "2025-12-26"], ["03:00", "87만", "20건", "2025-12-26"], ["04:00", "51만", "14건", "2025-12-26"], ["05:00", "116만", "23건", "2025-12-26"], ["06:00", "366만", "9건", "2025-12-26"], ["07:00", "385만", "8건", "2025-12-26"], ["08:00", "631만", "18건", "2025-12-26"], ["09:00", "1,138만", "18건", "2025-12-26"], ["10:00", "982만", "20건", "2025-12-26"], ["11:00", "1,520만", "18건", "2025-12-26"], ["12:00", "1,435만", "16건", "2025-12-26"], ["13:00", "1,491만", "21건", "2025-12-26"], ["14:00", "1,605만", "11건", "2025-12-26"], ["15:00", "1,456만", "17건", "2025-12-26"], ["16:00", "1,757만", "24건", "2025-12-26"], ["17:00", "1,757만", "16건", "2025-12-26"], ["18:00", "1,511만", "28건", "2025-12-26"], ["19:00", "1,341만", "33건", "2025-12-26"], ["20:00", "1,415만", "25건", "2025-12-26"], ["21:00", "1,309만", "29건", "2025-12-26"], ["22:00", "1,405만", "20건", "2025-12-26"], ["23:00", "1,207만", "24건", "2025-12-26"], ["00:00", "846만", "20건", "2025-12-27"]]}, {"label": "2025-12-27(토)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [11057539.0, 6233333.0, 7772727.0, 8284018.0, 11437499.0, 12384615.0, 13928571.0, 19399999.0, 14084991.0, 20999999.0, 21562500.0, 23769230.0, 17591879.0, 21428571.0, 21176470.0, 20866666.0, 19411764.0, 14115384.0, 12187830.0, 12027777.0, 12108796.0, 12571999.0, 13416666.0, 11809523.0], "hover": [["01:00", "1,105만", "31건", "2025-12-27"], ["02:00", "623만", "21건", "2025-12-27"], ["03:00", "777만", "20건", "2025-12-27"], ["04:00", "828만", "18건", "2025-12-27"], ["05:00", "1,143만", "18건", "2025-12-27"], ["06:00", "1,238만", "14건", "2025-12-27"], ["07:00", "1,392만", "14건", "2025-12-27"], ["08:00", "1,939만", "23건", "2025-12-27"], ["09:00", "1,408만", "22건", "2025-12-27"], ["10:00", "2,099만", "16건", "2025-12-27"], ["11:00", "2,156만", "19건", "2025-12-27"], ["12:00", "2,376만", "16건", "2025-12-27"], ["13:00", "1,759만", "23건", "2025-12-27"], ["14:00", "2,142만", "19건", "2025-12-27"], ["15:00", "2,117만", "18건", "2025-12-27"], ["16:00", "2,086만", "18건", "2025-12-27"], ["17:00", "1,941만", "20건", "2025-12-27"], ["18:00", "1,411만", "14건", "2025-12-27"], ["19:00", "1,218만", "22건", "2025-12-27"], ["20:00", "1,202만", "19건", "2025-12-27"], ["21:00", "1,210만", "26건", "2025-12-27"], ["22:00", "1,257만", "29건", "2025-12-27"], ["23:00", "1,341만", "21건", "2025-12-27"], ["00:00", "1,180만", "26건", "2025-12-28"]]}, {"label": "2025-12-28(일)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [11055555.0, 7947368.0, 7281250.0, 9944444.0, 8776401.0, 11714285.0, 12083333.0, 14052631.0, 14766666.0, 14630434.0, 14499999.0, 13266666.0, 12260233.0, 14038461.0, 14219999.0, 11104166.0, 9153571.0, 8085714.0, 7814999.0, 4800440.0, 5103571.0, 4281481.0, 3679166.0, 2761538.0], "hover": [["01:00", "1,105만", "22건", "2025-12-28"], ["02:00", "794만", "23건", "2025-12-28"], ["03:00", "728만", "19건", "2025-12-28"], ["04:00", "994만", "18건", "2025-12-28"], ["05:00", "877만", "21건", "2025-12-28"], ["06:00", "1,171만", "14건", "2025-12-28"], ["07:00", "1,208만", "15건", "2025-12-28"], ["08:00", "1,405만", "22건", "2025-12-28"], ["09:00", "1,476만", "16건", "2025-12-28"], ["10:00", "1,463만", "26건", "2025-12-28"], ["11:00", "1,449만", "23건", "2025-12-28"], ["12:00", "1,326만", "15건", "2025-12-28"], ["13:00", "1,226만", "24건", "2025-12-28"], ["14:00", "1,403만", "29건", "2025-12-28"], ["15:00", "1,421만", "29건", "2025-12-28"], ["16:00", "1,110만", "27건", "2025-12-28"], ["17:00", "915만", "30건", "2025-12-28"], ["18:00", "808만", "19건", "2025-12-28"], ["19:00", "781만", "35건", "2025-12-28"], ["20:00", "480만", "34건", "2025-12-28"], ["21:00", "510만", "35건", "2025-12-28"], ["22:00", "428만", "31건", "2025-12-28"], ["23:00", "367만", "30건", "2025-12-28"], ["00:00", "276만", "32건", "2025-12-29"]]}, {"label": "2025-12-29(월)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [2429629.0, 1194176.0, 1014999.0, 584615.0, 865217.0, 1033332.0, 3258479.0, 2600156.0, 3575362.0, 4392856.0, 6572221.0, 7184210.0, 4792407.0, 6166666.0, 6449999.0, 7592856.0, 6644827.0, 5668749.0, 5357142.0, 7206249.0, 5457692.0, 4824242.0, 4305555.0, 2249999.0], "hover": [["01:00", "242만", "28건", "2025-12-29"], ["02:00", "119만", "20건", "2025-12-29"], ["03:00", "101만", "22건", "2025-12-29"], ["04:00", "58만", "15건", "2025-12-29"], ["05:00", "86만", "25건", "2025-12-29"], ["06:00", "103만", "15건", "2025-12-29"], ["07:00", "325만", "20건", "2025-12-29"], ["08:00", "260만", "16건", "2025-12-29"], ["09:00", "357만", "23건", "2025-12-29"], ["10:00", "439만", "15건", "2025-12-29"], ["11:00", "657만", "18건", "2025-12-29"], ["12:00", "718만", "27건", "2025-12-29"], ["13:00", "479만", "30건", "2025-12-29"], ["14:00", "616만", "21건", "2025-12-29"], ["15:00", "644만", "31건", "2025-12-29"], ["16:00", "759만", "19건", "2025-12-29"], ["17:00", "664만", "31건", "2025-12-29"], ["18:00", "566만", "38건", "2025-12-29"], ["19:00", "535만", "29건", "2025-12-29"], ["20:00", "720만", "33건", "2025-12-29"], ["21:00", "545만", "29건", "2025-12-29"], ["22:00", "482만", "38건", "2025-12-29"], ["23:00", "430만", "38건", "2025-12-29"], ["00:00", "224만", "31건", "2025-12-30"]]}, {"label": "2025-12-30(화)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [1344999.0, 471153.0, 327777.0, 150000.0, 99999.0, 0.0, 0.0, 0.0, 16199999.0, 17999999.0, 17666666.0, 14312499.0, 12374999.0, 10808632.0, 14676767.0, 15056250.0, 14512345.0, 12617647.0, 12052631.0, 9660869.0, 7027777.0, 4956249.0, 5052631.0, 4379166.0], "hover": [["01:00", "134만", "35건", "2025-12-30"], ["02:00", "47만", "31건", "2025-12-30"], ["03:00", "32만", "12건", "2025-12-30"], ["04:00", "15만", "2건", "2025-12-30"], ["05:00", "9만", "1건", "2025-12-30"], ["06:00", "0만", "0건", "2025-12-30"], ["07:00", "0만", "0건", "2025-12-30"], ["08:00", "0만", "0건", "2025-12-30"], ["09:00", "1,619만", "11건", "2025-12-30"], ["10:00", "1,799만", "15건", "2025-12-30"], ["11:00", "1,766만", "3건", "2025-12-30"], ["12:00", "1,431만", "9건", "2025-12-30"], ["13:00", "1,237만", "11건", "2025-12-30"], ["14:00", "1,080만", "13건", "2025-12-30"], ["15:00", "1,467만", "13건", "2025-12-30"], ["16:00", "1,505만", "18건", "2025-12-30"], ["17:00", "1,451만", "18건", "2025-12-30"], ["18:00", "1,261만", "18건", "2025-12-30"], ["19:00", "1,205만", "23건", "2025-12-30"], ["20:00", "966만", "28건", "2025-12-30"], ["21:00", "702만", "24건", "2025-12-30"], ["22:00", "495만", "20건", "2025-12-30"], ["23:00", "505만", "27건", "2025-12-30"], ["00:00", "437만", "27건", "2025-12-31"]]}, {"label": "2025-12-31(수)", "x": ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"], "y": [3184444.0, 2900000.0, 1564044.0, 1234999.0, 1559999.0, 3312500.0, 4268749.0, 6738095.0, 7531249.0, 11152173.0, 13222222.0, 14055555.0, 13874999.0, 14666666.0, 15300653.0, 16045454.0, 15238095.0, 12655555.0, 10547618.0, 10624999.0, 10147825.0, 12055555.0, 13789473.0, null], "hover": [["01:00", "318만", "32건", "2025-12-31"], ["02:00", "290만", "25건", "2025-12-31"], ["03:00", "156만", "29건", "2025-12-31"], ["04:00", "123만", "20건", "2025-12-31"], ["05:00", "155만", "15건", "2025-12-31"], ["06:00", "331만", "12건", "2025-12-31"], ["07:00", "426만", "17건", "2025-12-31"], ["08:00", "673만", "22건", "2025-12-31"], ["09:00", "753만", "17건", "2025-12-31"], ["10:00", "1,115만", "25건", "2025-12-31"], ["11:00", "1,322만", "11건", "2025-12-31"], ["12:00", "1,405만", "24건", "2025-12-31"], ["13:00", "1,387만", "13건", "2025-12-31"], ["14:00", "1,466만", "15건", "2025-12-31"], ["15:00", "1,530만", "19건", "2025-12-31"], ["16:00", "1,604만", "27건", "2025-12-31"], ["17:00", "1,523만", "28건", "2025-12-31"], ["18:00", "1,265만", "25건", "2025-12-31"], ["19:00", "1,054만", "24건", "2025-12-31"], ["20:00", "1,062만", "22건", "2025-12-31"], ["21:00", "1,014만", "26건", "2025-12-31"], ["22:00", "1,205만", "19건", "2025-12-31"], ["23:00", "1,378만", "21건", "2025-12-31"], ["00:00", "-", "", "2026-01-01"]]}]}, "사냥터B": {"dates": [], "series": []}, "사냥터C": {"dates": [], "series": []}};
const REC  = {"미나르숲:남겨진 용의 둥지": [{"weekday": "토", "time": "12:00", "avg_price": 23769230.0, "avg_price_str": "2,376만", "avg_trade": 16, "n": 1}, {"weekday": "토", "time": "11:00", "avg_price": 21562500.0, "avg_price_str": "2,156만", "avg_trade": 19, "n": 1}, {"weekday": "토", "time": "14:00", "avg_price": 21428571.0, "avg_price_str": "2,142만", "avg_trade": 19, "n": 1}], "사냥터B": [], "사냥터C": []};

const kwSelect = document.getElementById("kwSelect");
const recList = document.getElementById("recList");

function renderDropdown() {
  kwSelect.innerHTML = "";
  MAPS.forEach((kw) => {
    const opt = document.createElement("option");
    opt.value = kw;
    opt.textContent = kw;
    kwSelect.appendChild(opt);
  });
}

function renderRecommendations(kw) {
  recList.innerHTML = "";
  const items = REC[kw] || [];
  if (!items.length) {
    const li = document.createElement("li");
    li.textContent = "추천할 데이터가 부족합니다.";
    recList.appendChild(li);
    return;
  }
  items.forEach((it, idx) => {
    const li = document.createElement("li");
    li.innerHTML = `<b>#${idx+1}</b> ${it.weekday} ${it.time} · 평균 ${it.avg_price_str} 
      <span class="pill">평균거래 ${it.avg_trade}건</span>
      <span class="pill">표본 ${it.n}</span>`;
    recList.appendChild(li);
  });
}

function renderChart(kw) {
  const obj = DATA[kw];
  const series = (obj && obj.series) ? obj.series : [];
  const traces = [];

  series.forEach(s => {
    const customdata = s.hover.map(h => [h[0], h[1], h[2], h[3]]);
    traces.push({
      x: s.x,
      y: s.y,
      type: "scatter",
      mode: "lines+markers",
      name: s.label,
      customdata,
      hovertemplate:
          "<b>"+s.label+"</b><br>" +
          "시간: %{customdata[0]}<br>" +
          "가격: %{customdata[1]}<br>" +
          "거래: %{customdata[2]}<br>" +
          "기준날짜: %{customdata[3]}<extra></extra>",
      connectgaps: false
    });
  });

  const layout = {
    title: kw,
    margin: {l: 50, r: 20, t: 50, b: 50},
    xaxis: {
      type: "category",
      categoryorder: "array",
      categoryarray: ["01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "00:00"],
      title: "시간"
    },
    yaxis: { title: "가격" },
    hovermode: "closest",
    legend: {orientation: "h"}
  };

  Plotly.newPlot("chart", traces, layout, {displayModeBar: true, responsive: true});
}

kwSelect.addEventListener("change", () => {
  const kw = kwSelect.value;
  renderRecommendations(kw);
  renderChart(kw);
});

renderDropdown();
const initial = MAPS[0];
kwSelect.value = initial;
renderRecommendations(initial);
renderChart(initial);
</script>
</body>
</html>
